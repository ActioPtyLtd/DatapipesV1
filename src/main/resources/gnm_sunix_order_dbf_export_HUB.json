{
  "script": {
    "schema": {},
    "tasks": {
      "read-spec-dbf": {
        "type": "extract",
        "behavior": "",
        "dataSource": {
          "type": "file",
          "behavior": "DBF",
          "directory": "C:\\Users\\mauri\\bitbucket\\gandm-data\\Sunix\\Hewett Sunix Vision DBF",
          "filenameTemplate": "VSPEC.DBF"
        }
      },
      "template": {
        "type": "mergeTemplate",
        "templates": {
          "status": "${if(isBlank(PICKUPDATE)) if(isBlank(READYDATE)) \"INFO\" else \"AWAITING_PICKUP\"  else \"COLLECTED\" }",
          "uri": "https://dev-api-gnm.actio.com.au:8443/service/order/$JOBNUM/status",
          "body": "{ \"action\": \"${if(isBlank(PICKUPDATE)) if(isBlank(READYDATE)) \"INFO\" else \"AWAITING_PICKUP\"  else \"COLLECTED\" }\", \"comment\": \"No Comment.\" }"
        }
      },
      "update-orderhub": {
        "type": "datasourceupdate",
        "behavior": "",
        "iterateR": "ds => ds.data",
        "keyL": "${row.JOBNUM}",
        "keyR": "$id",
        "changeL": "$status",
        "changeR": "${attributes.queue}",
        "dataSource": {
          "type": "rest",
          "behavior": "simple",
          "path": "-",
          "credential": {
            "user": "admin",
            "password": "password"
          },
          "query": {
            "update": {
              "verb": "post",
              "uri": "uri",
              "body": "body"
            },
            "read": {
              "uri": "https://dev-api-gnm.actio.com.au:8443/api/order"
            }
          }
        }
      }
    },
    "pipelines": {
      "load-frame" : {
        "pipe": "read-spec-dbf | template | update-orderhub"
      }
    },
    "services": { },
    "startup": {
      "exec": "load-frame"
    }
  }
}
