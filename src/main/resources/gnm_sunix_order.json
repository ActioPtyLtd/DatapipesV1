{
  "script": {
    "schema": {},
    "tasks": {
      "read-order-csv": {
        "type": "extract",
        "behavior": "simple",
        "dataSource": {
          "behavior": "regex",
          "directory": "C:\\Users\\mauri\\desktop\\",
          "type": "file",
          "filenameTemplate": "order-example.csv"
        }
      },
      "parse-order-csv": {
        "type": "transform",
        "batch": [
          "split2cols,col1",
          "row1header",
          "rename,productid,product_id",
          "keep,product_id,quantity,frame_brand,frame_bridge_size,frame_colour,frame_depth,frame_eye_size,frame_gender,frame_material,frame_model,frame_temple_length,frame_type",
          "productProperty,frame_brand,frame_bridge_size,frame_colour,frame_depth,frame_eye_size,frame_gender,frame_material,frame_model,frame_temple_length,frame_type",
          "numeric,quantity,0,0",
          "label,order_items",
          "addDataString,store_id,HAASC"
          ]
      },
      "update-order-api": {
        "type": "load",
        "behavior": "simple",
        "dataSource": {
          "type": "rest",
          "behavior": "simple",
          "path": "https://dev-api-gnm.actio.com.au:8443/service/order",
          "credential": {
            "user": "admin",
            "password": "password"
          },
          "query": {
            "create": {
              "header": "https://dev-api-gnm.actio.com.au:8443/service/order"
            },
            "update": {
              "header": "https://dev-api-gnm.actio.com.au:8443/service/order"
            }
          }
        }
      }
    },
    "pipelines": {
      "load-invoice" : {
        "pipe": "read-order-csv | parse-order-csv | update-order-api"
      }
    },
    "services": { },
    "startup": {
      "exec": "load-invoice"
    }
  }
}
